# Copyright 2019 The Fuchsia Authors. All rights reserved.
# Use of this source code is governed by a BSD-style license that can be
# found in the LICENSE file.

declare_args() {
  # Use this flag to exclude artifacts from Astro builds.
  # This is a very hacky way of ensuring that the resulting fuchsia.zbi fits
  # within the available space on device.
  # This will soon enough be replaced with a proper way to select image
  # artifacts based on board / product properties.
  # Artifacts that are known to not be useful on Astro builds (e.g. drivers for
  # other devices, tests) may be put in `if (!filter_out_of_astro)` blocks.
  # TODO(45680): remove this hack.
  filter_out_of_astro = false

  # Use this flag to include previously excluded artifacts on products based on
  # Astro.
  # Yes, our image building system is so broken that this is currently the only
  # way to accommodate the configurations we run on our infrastructure.
  on_second_thought_keep_on_astro = false
}

# Zircon manifests
#
# This file contains references to binaries either built by the Zircon GN build
# (`legacy-foo` targets) or migrated from that build into the Fuchsia GN build
# (`migrated-foo` targets).

import("aggregate_manifest.gni")
import("artifacts.gni")
import("zircon_artifact.gni")

foreach(artifact, zircon_artifacts) {
  zircon_artifact(artifact.name) {
    contents = artifact.lines

    deps = artifact.deps
  }
}

group("images") {
  deps = [
    ":legacy-aux",
    ":legacy-image",
    ":legacy-tests",
    ":migrated-aux",
    ":migrated-image",
    ":migrated-tests",
  ]
}

###############################################################################
# Legacy manifests
#
# These manifests mirror the manifests generated by the ZN build.
#
# Edit these targets if:
#  - a new binary was recently added to the ZN build and needs to be referred
#    to in the GN build - the edit is an addition;
#  - a binary is being migrated from the ZN build into the GN build - the edit
#    should be a removal.

aggregate_manifest("legacy-image") {
  # Though without any dependency, this target is being kept around as its
  # output is needed by support scripts.
  deps = []
}

# IMPORTANT NOTE: this target is now frozen, please do not add any more
# dependencies to it.
aggregate_manifest("legacy-aux") {
  deps = [
    ":bin.accept-child",
    ":bin.debugdata-test-helper",
    ":bin.null-namespace-child",
    ":hermetic.decompress-lz4f",
    ":hermetic.decompress-zstd",
    ":test.c.atexit-test",
    ":test.c.debugdata-test",
    ":test.c.posix-clocks-test",
    ":test.sys.default-stack-size-default-test",
    ":test.sys.default-stack-size-phdr-test",
    ":test.sys.fdio-test",
    ":test.sys.hermetic-compute-module-test",
    ":test.sys.noop-test",
    ":test.sys.noop-test.asan",
    ":test.sys.noop-test.asan-ubsan",
    ":test.sys.noop-test.profile",
    ":test.sys.noop-test.sancov",
    ":test.sys.noop-test.ubsan",
    ":test.sys.noop-test.ubsan-sancov",
    ":test.sys.noop-test.ubsan-sancov-full",
    ":test.sys.stdio-test",
  ]

  deps += [
    ":lib.c",
    ":lib.libcpp.so.2",
    ":lib.libcppabi.so.1",
    ":lib.libunwind.so.1",
  ]

  lib_names = [
#------------------
    "async-default",
#------------------
#------------------
    "backtrace",
#------------------
#------------------
    "devmgr-integration-test",
#------------------
#------------------
    "devmgr-launcher",
#------------------
#------------------
#------------------
#------------------
    "driver-integration-test",
#------------------
#------------------
    "fdio",
#------------------
#------------------
    "fs-management",
#------------------
#------------------
    "inspector",
#------------------
#------------------
#------------------
#------------------
    "log",
#------------------
#------------------
    "memfs",
#------------------
#------------------
    "mini-process",
#------------------
#------------------
    "ramdevice-client",
#------------------
#------------------
    "syslog",
#------------------
#------------------
    "tee-client-api",
#------------------
#------------------
    "trace-engine",
#------------------
#------------------
    "trace-provider-so",
#------------------
#------------------
    "unittest",
#------------------
#------------------
    "zircon-crypto",
#------------------
  ]
  lib_variants = [
    "asan",
    "asan-ubsan",
    "profile",
    "sancov",
    "ubsan",
    "ubsan-sancov",
    "ubsan-sancov-full",
  ]
  foreach(lib, lib_names) {
    deps += [ ":lib.$lib" ]
    foreach(variant, lib_variants) {
      deps += [ ":lib.$lib.$variant" ]
    }
  }

  reference = "legacy-aux-$target_cpu"
}

# IMPORTANT NOTE: this target is now frozen, please do not add any more
# dependencies to it.
aggregate_manifest("legacy-tests") {
  deps = [
    ":bin.debugdata-test-helper",
    ":bin.null-namespace-child",
    ":test.c.atexit-test",
    ":test.c.debugdata-test",
    ":test.c.posix-clocks-test",
    ":test.sys.default-stack-size-default-test",
    ":test.sys.default-stack-size-phdr-test",
    ":test.sys.fdio-test",
    ":test.sys.hermetic-compute-module-test",
    ":test.sys.noop-test",
    ":test.sys.noop-test.asan",
    ":test.sys.noop-test.asan-ubsan",
    ":test.sys.noop-test.profile",
    ":test.sys.noop-test.sancov",
    ":test.sys.noop-test.ubsan",
    ":test.sys.noop-test.ubsan-sancov",
    ":test.sys.noop-test.ubsan-sancov-full",
    ":test.sys.stdio-test",
  ]

  reference = "legacy-tests-$target_cpu"
}

###############################################################################
# Migrated manifests
#
# These manifests list binaries that were migrated from the ZN build into the
# GN build.
#
# Edit these targets if:
#  - a binary is being migrated from the ZN build into the GN build - the edit
#    should be an addition;
#  - a formerly migrated binary is being better integrated into the GN build
#    using idiomatic constructs - the edit should be a removal.

aggregate_manifest("migrated-image") {
  deps = [
    "//examples/drivers//fifo:demo-fifo-manifest",
    "//src/connectivity/bluetooth/hci/transport/uart:bt-transport-uart-manifest",
    "//src/connectivity/bluetooth/hci/transport/usb:bt-transport-usb-manifest",
    "//src/connectivity/bluetooth/hci/vendor/broadcom:bt-hci-broadcom-manifest",
    "//src/connectivity/bluetooth/hci/vendor/mediatek:bt-hci-mediatek-manifest",
    "//src/connectivity/ethernet/drivers/aml-ethernet-s912:aml-ethernet-s912-manifest",
    "//src/connectivity/ethernet/drivers/asix-88179:asix-88179-manifest",
    "//src/connectivity/ethernet/drivers/asix-88772b:asix-88772b-manifest",
    "//src/connectivity/ethernet/drivers/dwmac:dwmac-manifest",
    "//src/connectivity/ethernet/drivers/ethernet:ethernet-manifest",
    "//src/connectivity/ethernet/drivers/ethertap:ethertap-manifest",
    "//src/connectivity/ethernet/drivers/realtek-8211f:realtek-8211f-manifest",
    "//src/connectivity/ethernet/drivers/rndis:rndis-manifest",
    "//src/connectivity/ethernet/drivers/usb-cdc-ecm:usb-cdc-ecm-manifest",
    "//src/connectivity/ethernet/drivers/usb-cdc-ecm:usb-cdc-ecm-manifest",
    "//src/connectivity/ethernet/drivers/usb-cdc-function:usb-cdc-function-manifest",
    "//src/connectivity/ethernet/drivers/usb-cdc-function:usb-cdc-function-manifest",
    "//src/connectivity/network/drivers/network-device:manifest",
    "//src/developer/cmd:bin-manifest",
    "//src/devices/bin/driverctl:driverctl-manifest",
    "//src/devices/bin/lsdev:lsdev-manifest",
    "//src/devices/bin/unbind:unbind-manifest",
    "//src/devices/block/bin/biotime:biotime-manifest",
    "//src/devices/block/bin/blktest:blktest-manifest",
    "//src/devices/block/bin/disk-inspect:disk-inspect-manifest",
    "//src/devices/block/bin/fvm-check:fvm-check-manifest",
    "//src/devices/block/bin/gpt:gpt-manifest",
    "//src/devices/block/bin/iochk:iochk-manifest",
    "//src/devices/block/bin/iotime:iotime-manifest",
    "//src/devices/block/bin/lsblk:lsblk-manifest",
    "//src/devices/block/bin/sdio:sdio-manifest",
    "//src/devices/block/drivers/ahci:ahci-manifest",
    "//src/devices/block/drivers/aml-sd-emmc:aml-sd-emmc-manifest",
    "//src/devices/block/drivers/bootpart:bootpart-manifest",
    "//src/devices/block/drivers/core:core-manifest",
    "//src/devices/block/drivers/ftl:ftl-manifest",
    "//src/devices/block/drivers/fvm:fvm-manifest",
    "//src/devices/block/drivers/gpt:gpt-manifest",
    "//src/devices/block/drivers/hisi-ufs:hisi-ufs-manifest",
    "//src/devices/block/drivers/mbr:mbr-manifest",
    "//src/devices/block/drivers/msm8x53-sdhci:msm8x53-sdhci-manifest",
    "//src/devices/block/drivers/mtk-sdmmc:mtk-sdmmc-manifest",
    "//src/devices/block/drivers/nvme:nvme-manifest",
    "//src/devices/block/drivers/pci-sdhci:pci-sdhci-manifest",
    "//src/devices/block/drivers/ramdisk:ramdisk-manifest",
    "//src/devices/block/drivers/sdhci:sdhci-manifest",
    "//src/devices/block/drivers/sdmmc:sdmmc-manifest",
    "//src/devices/block/drivers/ums-function:ums-function-manifest",
    "//src/devices/block/drivers/usb-mass-storage:usb-mass-storage-manifest",
    "//src/devices/block/drivers/zxcrypt:zxcrypt-manifest",
    "//src/devices/bus/drivers/pci:bus-pci-manifest",
    "//src/devices/bus/drivers/pci:bus-pci.proxy-manifest",
    "//src/devices/bus/drivers/platform:platform-bus-manifest",
    "//src/devices/bus/drivers/platform:platform-bus.proxy-manifest",
    "//src/devices/clock/bin/clock:clkctl-manifest",
    "//src/devices/clock/bin/clock:clock-manifest",
    "//src/devices/clock/drivers/amlogic-clk:amlogic-clk-manifest",
    "//src/devices/clock/drivers/as370-clk:as370-clk-manifest",
    "//src/devices/clock/drivers/clock:clock-manifest",
    "//src/devices/clock/drivers/hisi3660:hisi3660-manifest",
    "//src/devices/clock/drivers/msm8x53-clk:msm8x53-clk-manifest",
    "//src/devices/clock/drivers/mtk-clk:mtk-clk-manifest",
    "//src/devices/clock/drivers/vs680-clk:vs680-clk-manifest",
    "//src/devices/cpu/bin/cpuctl:cpuctl-manifest",
    "//src/devices/cpu/drivers/aml-cpu:aml-cpu-manifest",
    "//src/devices/fw/drivers/qcom-pil:qcom-pil-manifest",
    "//src/devices/gpio/drivers/aml-axg-gpio:aml-axg-gpio-manifest",
    "//src/devices/gpio/drivers/aml-gxl-gpio:aml-gxl-gpio-manifest",
    "//src/devices/gpio/drivers/gpio:gpio-manifest",
    "//src/devices/gpio/drivers/hi3660-gpio:hi3660-gpio-manifest",
    "//src/devices/gpio/drivers/mt-8167:mt-8167-manifest",
    "//src/devices/gpio/drivers/qcom-gpio:qcom-gpio-manifest",
    "//src/devices/i2c/bin:i2cutil-manifest",
    "//src/devices/i2c/bin/i2c:i2c-manifest",
    "//src/devices/i2c/drivers/aml-i2c:aml-i2c-manifest",
    "//src/devices/i2c/drivers/dw-i2c:dw-i2c-manifest",
    "//src/devices/i2c/drivers/i2c:i2c-manifest",
    "//src/devices/i2c/drivers/intel-i2c:intel-i2c-manifest",
    "//src/devices/light-sensor/drivers/ams-light:ams-light-manifest",
    "//src/devices/light-sensor/drivers/lite-on:lite-on-manifest",
    "//src/devices/misc/drivers/builtin:builtin-manifest",
    "//src/devices/misc/drivers/cpu-trace:cpu-trace-manifest",
    "//src/devices/misc/drivers/ktrace:ktrace-manifest",
    "//src/devices/mlg/drivers/usb-harriet:usb-harriet-manifest",
    "//src/devices/nand/bin/nand-loader:nand-loader-manifest",
    "//src/devices/nand/bin/nand-util:nand-util-manifest",
    "//src/devices/nand/drivers/aml-rawnand:aml-rawnand-manifest",
    "//src/devices/nand/drivers/broker:nand-broker-manifest",
    "//src/devices/nand/drivers/cadence-hpnfc:cadence-hpnfc-manifest",
    "//src/devices/nand/drivers/nand:nand-manifest",
    "//src/devices/nand/drivers/nandpart:nandpart-manifest",
    "//src/devices/nand/drivers/ram-nand:ram-nand-manifest",
    "//src/devices/nand/drivers/skip-block:skip-block-manifest",
    "//src/devices/pci/drivers/amlogic-pcie:amlogic-pcie-manifest",
    "//src/devices/power/bin/lspwr:lspwr-manifest",
    "//src/devices/power/drivers/msm8x53-power:msm8x53-power-manifest",
    "//src/devices/power/drivers/mtk-power:mtk-power-manifest",
    "//src/devices/power/drivers/power:power-manifest",
    "//src/devices/power/drivers/power:power-test-manifest",
    "//src/devices/pwm/drivers/aml-pwm-init:aml-pwm-init-manifest",
    "//src/devices/pwm/drivers/aml-pwm:aml-pwm-manifest",
    "//src/devices/pwm/drivers/pwm:pwm-manifest",
    "//src/devices/ram/drivers/aml-ram:aml-ram-manifest",
    "//src/devices/rtc/drivers/fallback:fallback-manifest",
    "//src/devices/rtc/drivers/nxp:nxp-manifest",
    "//src/devices/rtc/drivers/pl031-rtc:pl031-rtc-manifest",
    "//src/devices/scpi/drivers/aml-scpi-s912:aml-scpi-s912.mailbox-manifest",
    "//src/devices/scpi/drivers/aml-scpi-s912:scpi-manifest",
    "//src/devices/securemem/drivers/aml-securemem:aml-securemem-manifest",
    "//src/devices/serial/drivers/aml-uart:aml-uart-manifest",
    "//src/devices/serial/drivers/ftdi:ftdi-fake-usb-manifest",
    "//src/devices/serial/drivers/ftdi:ftdi-manifest",
    "//src/devices/serial/drivers/serial-async:serial-async-manifest",
    "//src/devices/serial/drivers/serial:serial-manifest",
    "//src/devices/serial/drivers/usb-cdc-acm:fake-usb-cdc-acm-manifest",
    "//src/devices/serial/drivers/usb-cdc-acm:usb-cdc-acm-manifest",
    "//src/devices/shareddma/drivers/syn-dma:syn-dma-manifest",
    "//src/devices/spi/bin/spiutil:spiutil-manifest",
    "//src/devices/spi/drivers/aml-spi:aml-spi-manifest",
    "//src/devices/spi/drivers/mtk-spi:mtk-spi-manifest",
    "//src/devices/spi/drivers/spi:spi-manifest",
    "//src/devices/sysmem/drivers/sysmem:sysmem-manifest",
    "//src/devices/tee/drivers/optee:optee-manifest",
    "//src/devices/thermal/bin/thermal-cli:thermal-cli-manifest",
    "//src/devices/thermal/drivers/aml-thermal-s905d2g:aml-thermal-s905d2g-manifest",
    "//src/devices/thermal/drivers/aml-thermal-s912:aml-thermal-s912-manifest",
    "//src/devices/thermal/drivers/mtk-thermal:mtk-thermal-manifest",
    "//src/devices/usb/bin/lsusb:lsusb-manifest",
    "//src/devices/usb/bin/usb-fwloader:usb-fwloader-manifest",
    "//src/devices/usb/bin/usbctl:usbctl-manifest",
    "//src/devices/usb/drivers/aml-usb-phy-v2:aml-usb-phy-v2-manifest",
    "//src/devices/usb/drivers/dwc2:dwc2-manifest",
    "//src/devices/usb/drivers/dwc3:dwc3-manifest",
    "//src/devices/usb/drivers/hikey-usb:hikey-usb-manifest",
    "//src/devices/usb/drivers/mt-musb-host:mt-musb-host-manifest",
    "//src/devices/usb/drivers/mt-musb-peripheral:mt-musb-peripheral-manifest",
    "//src/devices/usb/drivers/usb-bus:usb-bus-manifest",
    "//src/devices/usb/drivers/usb-composite:usb-composite-manifest",
    "//src/devices/usb/drivers/usb-dfu:usb-dfu-manifest",
    "//src/devices/usb/drivers/usb-hub:usb-hub-manifest",
    "//src/devices/usb/drivers/usb-peripheral-test:usb-peripheral-test-manifest",
    "//src/devices/usb/drivers/usb-peripheral:usb-peripheral-manifest",
    "//src/devices/usb/drivers/usb-test/fx3:fx3-manifest",
    "//src/devices/usb/drivers/usb-test/usb-tester:usb-tester-manifest",
    "//src/devices/usb/drivers/usb-virtual-bus:usb-virtual-bus-manifest",
    "//src/devices/usb/drivers/virtual-bus-tester:virtual-bus-tester-function-manifest",
    "//src/devices/usb/drivers/virtual-bus-tester:virtual-bus-tester-manifest",
    "//src/devices/usb/drivers/xhci:xhci-manifest",
    "//src/graphics/display/drivers/aml-canvas:aml-canvas-manifest",
    "//src/graphics/display/drivers/amlogic-display:amlogic-display-manifest",
    "//src/graphics/display/drivers/display:display-manifest",
    "//src/graphics/display/drivers/dsi-dw:dsi-dw-manifest",
    "//src/graphics/display/drivers/dsi-mt:dsi-mt-manifest",
    "//src/graphics/display/drivers/fake:fake-manifest",
    "//src/graphics/display/drivers/hikey-display:hikey-display-manifest",
    "//src/graphics/display/drivers/simple:simple-amd-kaveri-manifest",
    "//src/graphics/display/drivers/simple:simple-bochs-manifest",
    "//src/graphics/display/drivers/simple:simple-intel-manifest",
    "//src/graphics/display/drivers/simple:simple-nv-manifest",
    "//src/graphics/display/drivers/ssd1306:ssd1306-manifest",
    "//src/graphics/drivers/aml-gpu:aml-gpu-manifest",
    "//src/media/audio/drivers/alc5514:alc5514-manifest",
    "//src/media/audio/drivers/alc5663:alc5663-manifest",
    "//src/media/audio/drivers/astro-pdm-input:astro-pdm-input-manifest",
    "//src/media/audio/drivers/astro-tdm-output:astro-tdm-output-manifest",
    "//src/media/audio/drivers/codecs/max98373:max98373-manifest",
    "//src/media/audio/drivers/codecs/cx9000:cx9000-manifest",
    "//src/media/audio/drivers/codecs/tas5782:tas5782-manifest",
    "//src/media/audio/drivers/codecs/tas5805:tas5805-manifest",
    "//src/media/audio/drivers/intel-hda/codecs/realtek:realtek-audio-codec-manifest",
    "//src/media/audio/drivers/max98927:max98927-manifest",
    "//src/media/audio/drivers/usb-audio:usb-audio-manifest",
    "//src/ui/backlight/bin/backlight:backlight-manifest",
    "//src/ui/backlight/drivers/sg-micro:sg-micro-manifest",
    "//src/ui/backlight/drivers/ti-lp8556:ti-lp8556-manifest",
    "//src/ui/input/bin/hid:hid-manifest",
    "//src/ui/input/drivers/bma253:bma253-manifest",
    "//src/ui/input/drivers/cypress:cypress-manifest",
    "//src/ui/input/drivers/focaltech:focaltech-manifest",
    "//src/ui/input/drivers/goodix:goodix-manifest",
    "//src/ui/input/drivers/hid-buttons:hid-buttons-manifest",
    "//src/ui/input/drivers/hid:hid-manifest",
    "//src/ui/input/drivers/hidctl:hidctl-manifest",
    "//src/ui/input/drivers/i2c-hid:i2c-hid-manifest",
    "//src/ui/input/drivers/usb-hid:usb-hid-fake-usb-manifest",
    "//src/ui/input/drivers/usb-hid:usb-hid-fake-usb-manifest",
    "//src/ui/input/drivers/usb-hid:usb-hid-manifest",
    "//src/ui/input/drivers/usb-hid:usb-hid-manifest",
    "//src/ui/light/drivers/aml-light:aml-light-manifest",
    "//src/ui/light/drivers/gpio-light:gpio-light-manifest",
    "//src/ui/light/drivers/lp50xx-light:lp50xx-light-manifest",
    "//zircon/system/core/bootsvc:bin-manifest",
    "//zircon/system/core/console:console-manifest",
    "//zircon/system/core/devmgr/fragment:fragment-manifest",
    "//zircon/system/core/devmgr/fragment:fragment.proxy-manifest",
    "//zircon/system/core/devmgr/fshost:fshost-manifest",
    "//zircon/system/core/miscsvc:miscsvc-manifest",
    "//zircon/system/core/netsvc:device-name-provider-manifest",
    "//zircon/system/core/netsvc:netsvc-manifest",
    "//zircon/system/core/ptysvc:ptysvc-manifest",
    "//zircon/system/core/pwrbtn-monitor:pwrbtn-monitor-manifest",
    "//zircon/system/core/svchost:svchost-manifest",
    "//zircon/system/core/sysinfo:sysinfo-manifest",
    "//zircon/system/dev/board/integration-test:integration-test-manifest",
    "//zircon/system/dev/board/machina:machina-manifest",
    "//zircon/system/uapp/audio:bin-manifest",
    "//zircon/system/uapp/blobfs:blobfs-manifest",
    "//zircon/system/uapp/crasher:crasher-manifest",
    "//zircon/system/uapp/dd:dd-manifest",
    "//zircon/system/uapp/df:df-manifest",
    "//zircon/system/uapp/disk-pave:install-disk-image-manifest",
    "//zircon/system/uapp/dlog:dlog-manifest",
    "//zircon/system/uapp/fs-fsck:fsck-manifest",
    "//zircon/system/uapp/fs-mkfs:mkfs-manifest",
    "//zircon/system/uapp/fs-mount:mount-manifest",
    "//zircon/system/uapp/fs-umount:umount-manifest",
    "//zircon/system/uapp/ihda:ihda-manifest",
    "//zircon/system/uapp/kcounter:kcounter-manifest",
    "//zircon/system/uapp/kstress:kstress-manifest",
    "//zircon/system/uapp/ktrace:ktrace-manifest",
    "//zircon/system/uapp/loadgen:loadgen-manifest",
    "//zircon/system/uapp/lz4:lz4-manifest",
    "//zircon/system/uapp/minfs:minfs-manifest",
    "//zircon/system/uapp/mutex_pi_exerciser:mutex_pi_exerciser-manifest",
    "//zircon/system/uapp/ping:ping-manifest",
    "//zircon/system/uapp/psutils:handles-manifest",
    "//zircon/system/uapp/psutils:kill-manifest",
    "//zircon/system/uapp/psutils:killall-manifest",
    "//zircon/system/uapp/psutils:kstats-manifest",
    "//zircon/system/uapp/psutils:memgraph-manifest",
    "//zircon/system/uapp/psutils:ps-manifest",
    "//zircon/system/uapp/psutils:signal-manifest",
    "//zircon/system/uapp/psutils:threads-manifest",
    "//zircon/system/uapp/psutils:top-manifest",
    "//zircon/system/uapp/psutils:vmaps-manifest",
    "//zircon/system/uapp/psutils:vmos-manifest",
    "//zircon/system/uapp/run-vc:run-vc-manifest",
    "//zircon/system/uapp/runtests:runtests-manifest",
    "//zircon/system/uapp/spawn:spawn-manifest",
    "//zircon/system/uapp/storage-metrics:storage-metrics-manifest",
    "//zircon/system/uapp/syscall-check:syscall-check-manifest",
    "//zircon/system/uapp/tee-test:tee-test-manifest",
    "//zircon/system/uapp/trace-benchmark:trace-benchmark-manifest",
    "//zircon/system/uapp/trace-example:trace-example-manifest",
    "//zircon/system/uapp/waitfor:waitfor-manifest",
    "//zircon/system/uapp/watch:watch-manifest",
    "//zircon/system/ulib/driver-info/app:driverinfo-manifest",
    "//zircon/third_party/dev/ethernet/e1000:e1000-manifest",
    "//zircon/third_party/uapp/dash:dash-manifest",
    "//zircon/third_party/uapp/fsck-msdosfs:fsck-msdosfs-manifest",
    "//zircon/third_party/uapp/kilo:kilo-manifest",
    "//zircon/third_party/uapp/mkfs-msdosfs:mkfs-msdosfs-manifest",
  ]

  if (target_cpu == "arm64") {
    deps += [
      "//zircon/system/dev/board/as370:as370-manifest",
      "//zircon/system/dev/board/astro:astro-manifest",
      "//zircon/system/dev/board/c18:c18-manifest",
      "//zircon/system/dev/board/gauss:gauss-i2c-test-manifest",
      "//zircon/system/dev/board/gauss:gauss-manifest",
      "//zircon/system/dev/board/hikey960:hi3660-i2c-test-manifest",
      "//zircon/system/dev/board/hikey960:hikey960-manifest",
      "//zircon/system/dev/board/luis:luis-manifest",
      "//zircon/system/dev/board/msm8998:msm8998-manifest",
      "//zircon/system/dev/board/msm8x53-som:msm8x53-som-manifest",
      "//zircon/system/dev/board/mt8167s_ref:mt8167s_ref-manifest",
      "//zircon/system/dev/board/nelson:nelson-manifest",
      "//zircon/system/dev/board/qemu-arm64:qemu-arm64-manifest",
      "//zircon/system/dev/board/sherlock:sherlock-manifest",
      "//zircon/system/dev/board/vim2:vim2-manifest",
      "//zircon/system/dev/board/vim3:vim3-manifest",
    ]
  } else if (target_cpu == "x64") {
    deps += [
      "//src/connectivity/ethernet/drivers/intel-ethernet:intel-ethernet-manifest",
      "//src/connectivity/ethernet/drivers/realtek-8111:realtek-8111-manifest",
      "//src/devices/misc/drivers/tpm:tpm-manifest",
      "//src/devices/rtc/drivers/intel-rtc:intel-rtc-manifest",
      "//src/devices/serial/drivers/intel-serialio:intel-serialio-manifest",
      "//src/devices/serial/drivers/uart16550:uart16550-manifest",
      "//src/graphics/display/drivers/intel-i915:intel-i915-manifest",
      "//src/ui/input/drivers/pc-ps2:pc-ps2-manifest",
      "//zircon/system/dev/board/x86:platform-bus-x86-manifest",
      "//zircon/system/uapp/acpidump:acpidump-manifest",
    ]
  }

  if (!filter_out_of_astro || on_second_thought_keep_on_astro) {
    deps += [
      "//src/connectivity/ethernet/drivers/asix-88179:fake-asix-88179-manifest",
      "//src/connectivity/ethernet/drivers/virtio:virtio_ethernet-manifest",
      "//src/devices/block/drivers/as370-sdhci:as370-sdhci-manifest",
      "//src/devices/block/drivers/virtio:virtio_block-manifest",
      "//src/devices/block/drivers/virtio:virtio_scsi-manifest",
      "//src/devices/gpio/drivers/as370-gpio:as370-gpio-manifest",
      "//src/devices/gpio/drivers/gpio-test:gpio-test-manifest",
      "//src/devices/i2c/drivers/mt8167-i2c:mt8167-i2c-manifest",
      "//src/devices/misc/drivers/test:test-manifest",
      "//src/devices/misc/drivers/virtio-rng:virtio_rng-manifest",
      "//src/devices/misc/drivers/virtio-socket:virtio_socket-manifest",
      "//src/devices/power/drivers/as370-power:as370-power-manifest",
      "//src/devices/power/drivers/vs680-power:vs680-power-manifest",
      "//src/devices/serial/bin/serial-test:serial-test-manifest",
      "//src/devices/serial/drivers/virtio-console:virtio_console-manifest",
      "//src/devices/tests/bind-debugger-test:bind-debugger-test-driver-manifest",
      "//src/devices/tests/bind-fail-test:bind-fail-test-manifest",
      "//src/devices/tests/crash-device:crash-device-manifest",
      "//src/devices/tests/ddk-lifecycle:ddk-lifecycle-test-manifest",
      "//src/devices/tests/ddk-power:ddk-power-test-child-manifest",
      "//src/devices/tests/ddk-power:ddk-power-test-manifest",
      "//src/devices/tests/ddk-runcompatibilityhook:ddk-runcompatibilityhook-test-child-manifest",
      "//src/devices/tests/ddk-runcompatibilityhook:ddk-runcompatibilityhook-test-manifest",
      "//src/devices/tests/ddk-schedule-work:ddk-schedule-work-perf-manifest",
      "//src/devices/tests/ddk-schedule-work:ddk-schedule-work-test-manifest",
      "//src/devices/tests/ddk-test:ddk-test-manifest",
      "//src/devices/tests/devhost-test:devhost-test-child-manifest",
      "//src/devices/tests/devhost-test:devhost-test-manifest",
      "//src/devices/tests/devhost-test:devhost-test-manual-manifest",
      "//src/devices/tests/fidl-async-llcpp-driver:fidl-async-llcpp-driver-manifest",
      "//src/devices/tests/fidl-llcpp-driver:fidl-llcpp-driver-manifest",
      "//src/devices/tests/isolateddevmgr:isolateddevmgr-test-manifest",
      "//src/devices/tests/mock-device:mock-device-manifest",
      "//src/devices/tests/sysdev:sysdev-manifest",
      "//src/devices/tests/unit-test-test:unit-test-fail-manifest",
      "//src/devices/tests/unit-test-test:unit-test-pass-manifest",
      "//src/devices/thermal/drivers/as370-thermal:as370-thermal-manifest",
      "//src/devices/thermal/drivers/vs680-thermal:vs680-thermal-manifest",
      "//src/devices/usb/bin/xdc-test:xdc-test-manifest",
      "//src/devices/usb/drivers/as370-usb-phy:as370-usb-phy-manifest",
      "//src/devices/usb/drivers/nelson-usb-phy:nelson-usb-phy-manifest",
      "//src/devices/usb/drivers/usb-bus:usb-device-manifest",
      "//src/devices/usb/drivers/usb-test/flash-programmer:flash-programmer-manifest",
      "//src/graphics/display/bin/display-test:display-test-manifest",
      "//src/graphics/display/drivers/goldfish-display:goldfish-display-manifest",
      "//src/graphics/display/drivers/mt8167s-display:mt8167s-display-manifest",
      "//src/graphics/display/drivers/vim-display:vim-display-manifest",
      "//src/graphics/drivers/virtio:virtio_gpu-manifest",
      "//src/media/audio/drivers/as370-pdm-input:as370-pdm-input-manifest",
      "//src/media/audio/drivers/as370-tdm-output:as370-tdm-output-manifest",
      "//src/media/audio/drivers/gauss-pdm-input:gauss-pdm-input-manifest",
      "//src/media/audio/drivers/gauss-tdm:gauss-tdm-manifest",
      "//src/media/audio/drivers/intel-hda/codecs/hdmi:hdmi-audio-codec-manifest",
      "//src/media/audio/drivers/intel-hda/codecs/qemu:qemu-audio-codec-manifest",
      "//src/media/audio/drivers/intel-hda/controller:intel-hda-manifest",
      "//src/media/audio/drivers/mt8167-tdm-input:mt8167-tdm-input-manifest",
      "//src/media/audio/drivers/mt8167-tdm-output:mt8167-tdm-output-manifest",
      "//src/media/audio/drivers/nelson-pdm-input:nelson-pdm-input-manifest",
      "//src/media/audio/drivers/nelson-tdm-output:nelson-tdm-output-manifest",
      "//src/media/audio/drivers/sherlock-pdm-input:sherlock-pdm-input-manifest",
      "//src/media/audio/drivers/sherlock-tdm-output:sherlock-tdm-output-manifest",
      "//src/ui/input/drivers/virtio:virtio_input-manifest",
      "//zircon/system/dev/board/qemu-arm64:qemu-arm64-manifest",
      "//zircon/system/uapp/audio:test-manifest",
      "//zircon/system/ulib/ddktl/test:ddktl-test-manifest",
      "//zircon/system/utest/platform-bus:test-audio-codec-manifest",
      "//zircon/system/utest/platform-bus:test-board-manifest",
      "//zircon/system/utest/platform-bus:test-child-1-manifest",
      "//zircon/system/utest/platform-bus:test-child-2-manifest",
      "//zircon/system/utest/platform-bus:test-child-2.proxy-manifest",
      "//zircon/system/utest/platform-bus:test-child-3-manifest",
      "//zircon/system/utest/platform-bus:test-clock-manifest",
      "//zircon/system/utest/platform-bus:test-composite-manifest",
      "//zircon/system/utest/platform-bus:test-gpio-manifest",
      "//zircon/system/utest/platform-bus:test-i2c-manifest",
      "//zircon/system/utest/platform-bus:test-parent-manifest",
      "//zircon/system/utest/platform-bus:test-power-manifest",
      "//zircon/system/utest/platform-bus:test-pwm-manifest",
      "//zircon/system/utest/platform-bus:test-spi-manifest",
    ]
  }
}

aggregate_manifest("migrated-aux") {
  deps = [
    "//src/devices/tests/ddk-test:ddk-test-manifest",
    "//zircon/system/uapp/audio:test-manifest",

    # Please uncomment and update to //zircon/whatever below, but keep these
    # unsorted to avoid trivial rebase collisions.
#------------------
    #":bin.accept-child",
#------------------
    "//zircon/system/uapp/blobfs:blobfs-manifest",
#------------------
    #":bin.debugdata-test-helper",
#------------------
    "//zircon/system/ulib/elf-search/test:elf-search-test-helper-manifest",
    "//zircon/system/utest/evil:evil-manifest",
    "//zircon/system/utest/fidl:fidl-handle-policy-test-app-manifest",
    "//zircon/third_party/uapp/fsck-msdosfs:fsck-msdosfs-manifest",
    "//zircon/system/uapp/minfs:minfs-manifest",
    "//zircon/third_party/uapp/mkfs-msdosfs:mkfs-msdosfs-manifest",
    "//zircon/system/utest/msd:msd-manifest",
    "//zircon/system/core/netsvc:netsvc-manifest",
#------------------
    #":bin.null-namespace-child",
#------------------
#------------------
    #":bin.vdso-variant-helper",
#------------------
    "//src/media/audio/drivers/alc5663:alc5663-manifest",
    "//src/devices/tests/crash-device:crash-device-manifest",
    "//src/devices/tests/devhost-test:devhost-test-manifest",
    "//src/devices/tests/sysdev:sysdev-manifest",
    "//src/devices/tests/mock-device:mock-device-manifest",
#------------------
    #":test.c.atexit-test",
#------------------
#------------------
    #":test.c.debugdata-test",
#------------------
#------------------
    #":test.c.posix-clocks-test",
#------------------
#------------------
    "//zircon/system/utest/core:c11-condvar-manifest",
    "//zircon/system/utest/core:c11-mutex-manifest",
    "//zircon/system/utest/core:c11-thread-manifest",
    "//zircon/system/utest/core:channel-manifest",
    "//zircon/system/utest/core:channel-write-etc-manifest",
    "//zircon/system/utest/core:clock-manifest",
    "//zircon/system/utest/core:debug-manifest",
    "//zircon/system/utest/core:elf-tls-manifest",
    "//zircon/system/utest/core:event-pair-manifest",
    "//zircon/system/utest/core:fifo-manifest",
    "//zircon/system/utest/core:fpu-manifest",
    "//zircon/system/utest/core:futex-manifest",
    "//zircon/system/utest/core:handle-close-manifest",
    "//zircon/system/utest/core:handle-dup-manifest",
    "//zircon/system/utest/core:handle-info-manifest",
    "//zircon/system/utest/core:handle-transfer-manifest",
    "//zircon/system/utest/core:handle-wait-manifest",
    "//zircon/system/utest/core:job-manifest",
    "//zircon/system/utest/core:memory-mapping-manifest",
    "//zircon/system/utest/core:object-child-manifest",
    "//zircon/system/utest/core:object-info-manifest",
    "//zircon/system/utest/core:object-wait-manifest",
    "//zircon/system/utest/core:pager-manifest",
    "//zircon/system/utest/core:port-manifest",
    "//zircon/system/utest/core:process-manifest",
    "//zircon/system/utest/core:pthread-barrier-manifest",
    "//zircon/system/utest/core:pthread-manifest",
    "//zircon/system/utest/core:pthread-tls-manifest",
    "//zircon/system/utest/core:socket-manifest",
    "//zircon/system/utest/core:stack-manifest",
    "//zircon/system/utest/core:stream-manifest",
    "//zircon/system/utest/core:sync-completion-manifest",
    "//zircon/system/utest/core:sync-condition-manifest",
    "//zircon/system/utest/core:sync-mutex-manifest",
    "//zircon/system/utest/core:threads-manifest",
    "//zircon/system/utest/core:time-manifest",
    "//zircon/system/utest/core:version-manifest",
    "//zircon/system/utest/core:vmar-manifest",
    "//zircon/system/utest/core:vmo-manifest",
    "//zircon/system/core/devmgr/fshost:block-watcher-test-manifest",
    "//zircon/system/ulib/devmgr-integration-test/test:devmgr-integration-manifest",
    "//zircon/system/ulib/driver-integration-test/test:driver-integration-manifest",
    "//zircon/system/utest/driver-test:driver-test-manifest",
    "//zircon/system/utest/fallback-rtc:fallback-rtc-manifest",
    "//zircon/system/core/devmgr/fshost:fshost-metrics-test-manifest",
    "//zircon/system/core/devmgr/fshost:fshost-test-manifest",
    "//zircon/system/ulib/blobfs/test:blobfs-integration-manifest",
    "//zircon/system/ulib/blobfs/test:blobfs-large-integration-fragmentation-manifest",
    "//zircon/system/ulib/blobfs/test:blobfs-large-integration-no-space-manifest",
    "//zircon/system/ulib/blobfs/test:blobfs-large-integration-short-manifest",
    "//zircon/system/ulib/blobfs/test:blobfs-large-integration-use-second-bitmap-manifest",
    "//zircon/system/ulib/blobfs/test:blobfs-integration-paged-manifest",
    "//zircon/system/ulib/blobfs/test:blobfs-large-integration-fragmentation-paged-manifest",
    "//zircon/system/ulib/blobfs/test:blobfs-large-integration-no-space-paged-manifest",
    "//zircon/system/ulib/blobfs/test:blobfs-large-integration-short-paged-manifest",
    "//zircon/system/ulib/blobfs/test:blobfs-large-integration-use-second-bitmap-paged-manifest",
    "//zircon/system/ulib/blobfs/test:blobfs-unit-manifest",
    "//zircon/system/ulib/block-client/test:block-client-unit-manifest",
    "//zircon/system/utest/devfs:devfs-manifest",
    "//zircon/system/utest/fs-bench:fs-bench-manifest",
    "//zircon/system/utest/fs-management:fs-management-manifest",
    "//zircon/system/utest/fs:fs-manifest",
    "//zircon/system/utest/fs-test-utils:fs-test-utils-manifest",
    "//zircon/system/ulib/fs/journal/test:journal-unit-manifest",
    "//zircon/system/utest/memfs:memfs-manifest",
    "//zircon/system/ulib/fs/metrics/test:metrics-cobalt-manifest",
    "//zircon/system/ulib/fs/metrics/test:metrics-composite-latency-event-manifest",
    "//zircon/system/ulib/fs/metrics/test:metrics-inspect-manifest",
    "//zircon/system/ulib/minfs/allocator/test:minfs-allocator-unit-manifest",
    "//zircon/system/ulib/minfs/test:minfs-integration-manifest",
    "//zircon/system/ulib/minfs/test:minfs-power-manifest",
    "//zircon/system/utest/minfs-micro-benchmark:minfs-micro-benchmark-manifest",
    "//zircon/system/ulib/minfs/test:minfs-unit-manifest",
    "//zircon/system/ulib/c/test/sanitizer:sanitizer-utils-manifest",
    "//zircon/system/ulib/storage/buffer/test:storage_buffer-manifest",
    "//zircon/system/ulib/storage/operation/test:storage_operation-manifest",
    "//src/devices/block/drivers/ahci:ahci-unittest-manifest",
    "//src/devices/gpio/drivers/aml-axg-gpio:aml-axg-gpio-test-manifest",
    "//src/devices/cpu/drivers/aml-cpu:aml-cpu-test-manifest",
    "//src/devices/securemem/drivers/aml-securemem:aml-securemem-test-manifest",
    "//src/devices/clock/drivers/amlogic-clk:amlogic-clk-test-manifest",
    "//src/devices/power/drivers/as370-power:as370-power-test-manifest",
    "//zircon/system/dev/lib/as370/test:audio-dsp-test-manifest",
    "//src/ui/backlight/tests:backlight-test-manifest",
    "//zircon/third_party/ulib/backtrace/test:backtrace-test-manifest",
    "//zircon/system/utest/biotime:biotime-test-manifest",
    "//src/devices/block/drivers/core:core-unittest-manifest",
    "//zircon/system/core/bootsvc/test:bootsvc-unit-test-manifest",
    "//zircon/system/core/console:console-test-manifest",
    "//zircon/system/core/svchost:crashsvc-test-manifest",
    "//src/devices/tests/ddk-fidl-test:ddk-fidl-test-manifest",
    "//src/devices/tests/ddk-lifecycle:ddk-lifecycle-manifest",
    "//src/devices/tests/ddk-power:ddk-power-manifest",
    "//src/devices/tests/ddk-runcompatibilityhook:ddk-runcompatibilityhook-test-manifest",
    "//src/devices/tests/ddk-schedule-work:ddk-schedule-work-manifest",
#------------------
    #":test.sys.default-stack-size-default-test",
#------------------
#------------------
    #":test.sys.default-stack-size-phdr-test",
#------------------
    "//zircon/system/dev/lib/device-protocol-pci/test:device-protocol-pci-test-manifest",
    "//zircon/system/dev/lib/device-protocol-pdev/test:device-protocol-pdev-test-manifest",
    "//zircon/system/ulib/disk_inspector/test:disk_inspector_unit-manifest",
    "//zircon/system/utest/dlfcn:dlfcn-manifest",
    "//zircon/system/dev/lib/dma-buffer/test:dma-buffer-test-manifest",
    "//zircon/system/ulib/elf-search/test:elf-search-manifest",
#------------------
    #":test.sys.fdio-test",
#------------------
    "//zircon/system/ulib/fidl-async/test:fidl-async-test-manifest",
    "//zircon/system/utest/fidl:fidl-manifest",
    "//zircon/system/ulib/fit/test:fit-manifest",
    "//zircon/system/utest/fs-recovery:fs-recovery-manifest",
    "//zircon/system/ulib/fs/test_support/test:fs_test_support-manifest",
    "//zircon/system/ulib/ftl/test:ftl_test-manifest",
    "//zircon/system/utest/futex-ownership:futex-ownership-manifest",
    "//src/devices/block/drivers/gpt:gpt-device-test-manifest",
#------------------
    #":test.sys.hermetic-compute-module-test",
#------------------
    "//zircon/system/ulib/hermetic-decompressor/test:hermetic-decompressor-manifest",
    "//zircon/system/ulib/inspect/test:inspect-manifest",
    "//zircon/system/uapp/disk-pave:install-disk-image-test-manifest",
    "//zircon/system/ulib/io-scheduler/test:io-scheduler-test-manifest",
    "//zircon/system/utest/kcounter:kcounter-manifest",
    "//zircon/system/ulib/lazy_init/test:lazy_init-test-manifest",
    "//zircon/third_party/ulib/linenoise/test:linenoise-test-manifest",
    "//zircon/system/utest/log:log-manifest",
    "//src/devices/block/drivers/mbr:mbr-test-manifest",
    "//zircon/system/ulib/mock-function/test:mock-function-test-manifest",
    "//src/devices/clock/drivers/msm8x53-clk:msm8x53-clk-test-manifest",
    "//src/devices/power/drivers/msm8x53-power:msm8x53-power-test-manifest",
    "//src/devices/usb/drivers/mt-musb-host:mt-hci-request-queue-test-manifest",
    "//src/devices/usb/drivers/mt-musb-host:mt-hci-test-manifest",
    "//src/devices/usb/drivers/mt-musb-host:mt-hci-transaction-test-manifest",
    "//zircon/system/dev/lib/mt8167/test:mt8167-audio-lib-test-manifest",
    "//zircon/system/dev/board/mt8167s_ref:mt8167s_ref-test-manifest",
    "//zircon/system/core/netsvc:netsvc-stress-test-manifest",
    "//zircon/system/core/netsvc:netsvc-test-manifest",
#------------------
    #":test.sys.noop-test",
#------------------
#------------------
    #":test.sys.noop-test.asan",
#------------------
#------------------
    #":test.sys.noop-test.asan-ubsan",
#------------------
#------------------
    #":test.sys.noop-test.profile",
#------------------
#------------------
    #":test.sys.noop-test.sancov",
#------------------
#------------------
    #":test.sys.noop-test.ubsan",
#------------------
#------------------
    #":test.sys.noop-test.ubsan-sancov",
#------------------
#------------------
    #":test.sys.noop-test.ubsan-sancov-full",
#------------------
    "//src/devices/tee/drivers/optee:optee-message-test-manifest",
    "//zircon/system/ulib/paver/test:paver-test-manifest",
    "//zircon/system/ulib/libabr/test:libabr-test-manifest",
    "//src/devices/bus/drivers/pci/test:pci-driver-manifest",
    "//zircon/system/utest/perftest:perftest-manifest",
    "//zircon/system/core/ptysvc:ptysvc-test-manifest",
    "//src/devices/nand/drivers/ram-nand:ram-nand-test-manifest",
    "//zircon/system/ulib/range/test:range-manifest",
    "//zircon/system/utest/runtests-utils:runtests-utils-manifest",
    "//zircon/system/utest/service:service-llcpp-manifest",
    "//src/ui/backlight/drivers/sg-micro:sgm37603a-test-manifest",
    "//src/devices/spi/drivers/mtk-spi:mtk-spi-test-manifest",
    "//src/devices/spi/drivers/spi:spi-test-manifest",
#------------------
    #":test.sys.stdio-test",
#------------------
    "//zircon/system/ulib/storage-metrics/test:storage-metrics-manifest",
    "//zircon/system/dev/lib/as370/test:syn-audio-in-test-manifest",
    "//zircon/system/ulib/sysconfig-client/test:sysconfig-sync-client-test-manifest",
    "//zircon/system/utest/sysmem:sysmem-manifest",
    "//src/devices/sysmem/drivers/sysmem:sysmem-unittest-manifest",
    "//zircon/system/ulib/tftp/test:tftp-test-manifest",
    "//src/devices/thermal/bin/thermal-cli:thermal-cli-manifest",
#------------------
    #":test.sys.ti-lp8556-test",
#------------------
    "//src/ui/backlight/drivers/ti-lp8556:ti-lp8556-test-manifest",
    "//zircon/system/utest/time:time-manifest",
    "//zircon/system/ulib/trace-engine/test:hash-table-test-manifest",
    "//zircon/system/ulib/trace-provider/test:provider-test-manifest",
    "//zircon/system/utest/trace:trace-static-engine-manifest",
    "//zircon/system/utest/trace:trace-manifest",
    "//src/devices/serial/drivers/uart16550:uart16550-test-manifest",
    "//zircon/system/ulib/unittest/test:unittest-manifest",
    "//src/connectivity/ethernet/drivers/usb-cdc-ecm:usb-cdc-ecm-unittest-manifest",
    "//zircon/system/dev/lib/usb/test:usb-desc-lib-test-manifest",
    "//zircon/system/dev/lib/usb/test:usb-request-cpp-test-manifest",
    "//zircon/system/dev/lib/usb/test:usb-wrapper-test-manifest",
    "//zircon/system/utest/utc-procargs:utc-procargs-manifest",
    "//zircon/system/utest/vdso-variant:vdso-variant-manifest",
    "//zircon/system/utest/vdso-variant:vdso-variant-helper-manifest",
    "//zircon/system/ulib/zbi-bootfs/test:zbi-bootfs-test-manifest",
    "//zircon/system/ulib/libzbi/test:zbi-manifest",
  ]

  if (target_cpu == "arm64") {
    deps += []
  } else if (target_cpu == "x64") {
    deps += [
      "//zircon/system/dev/board/x86:x86-battery-test-manifest",
      "//zircon/system/dev/board/x86:x86-board-test-manifest",
      "//zircon/system/dev/board/x86:x86-cros-ec-test-manifest",
      "//zircon/system/dev/board/x86:x86-lid-test-manifest",
      "//zircon/system/dev/board/x86:x86-pwrsrc-test-manifest",
      "//zircon/system/dev/board/x86:x86-thermal-test-manifest",
      "//zircon/system/utest/x86-board:x86-board-manifest",
      "//zircon/system/utest/x86-umip:x86-umip-manifest",
    ]
  }
}

aggregate_manifest("migrated-tests") {
  deps = [
    "//src/devices/tests/ddk-test:ddk-test-manifest",
    "//zircon/system/uapp/audio:test-manifest",

    # Please uncomment and update to //zircon/whatever below, but keep these
    # unsorted to avoid trivial rebase collisions.
    "//zircon/system/uapp/blobfs:blobfs-manifest",
#------------------
    #":bin.debugdata-test-helper",
#------------------
    "//zircon/system/utest/evil:evil-manifest",
    "//zircon/system/uapp/minfs:minfs-manifest",
    "//zircon/system/utest/msd:msd-manifest",
#------------------
    #":bin.null-namespace-child",
#------------------
    "//src/devices/spi/drivers/mtk-spi:mtk-spi-test-manifest",
    "//src/media/audio/drivers/alc5663:alc5663-manifest",
    "//src/devices/tests/crash-device:crash-device-manifest",
    "//src/devices/tests/devhost-test:devhost-test-manifest",
    "//src/devices/tests/sysdev:sysdev-manifest",
    "//src/devices/tests/mock-device:mock-device-manifest",
#------------------
    #":test.c.atexit-test",
#------------------
#------------------
    #":test.c.debugdata-test",
#------------------
#------------------
    #":test.c.posix-clocks-test",
#------------------
    "//zircon/system/utest/core:c11-condvar-manifest",
    "//zircon/system/utest/core:c11-mutex-manifest",
    "//zircon/system/utest/core:c11-thread-manifest",
    "//zircon/system/utest/core:channel-manifest",
    "//zircon/system/utest/core:channel-write-etc-manifest",
    "//zircon/system/utest/core:clock-manifest",
    "//zircon/system/utest/core:debug-manifest",
    "//zircon/system/utest/core:elf-tls-manifest",
    "//zircon/system/utest/core:event-pair-manifest",
    "//zircon/system/utest/core:fifo-manifest",
    "//zircon/system/utest/core:fpu-manifest",
    "//zircon/system/utest/core:futex-manifest",
    "//zircon/system/utest/core:handle-close-manifest",
    "//zircon/system/utest/core:handle-dup-manifest",
    "//zircon/system/utest/core:handle-info-manifest",
    "//zircon/system/utest/core:handle-transfer-manifest",
    "//zircon/system/utest/core:handle-wait-manifest",
    "//zircon/system/utest/core:job-manifest",
    "//zircon/system/utest/core:memory-mapping-manifest",
    "//zircon/system/utest/core:object-child-manifest",
    "//zircon/system/utest/core:object-info-manifest",
    "//zircon/system/utest/core:object-wait-manifest",
    "//zircon/system/utest/core:pager-manifest",
    "//zircon/system/utest/core:port-manifest",
    "//zircon/system/utest/core:process-manifest",
    "//zircon/system/utest/core:pthread-barrier-manifest",
    "//zircon/system/utest/core:pthread-manifest",
    "//zircon/system/utest/core:pthread-tls-manifest",
    "//zircon/system/utest/core:socket-manifest",
    "//zircon/system/utest/core:stack-manifest",
    "//zircon/system/utest/core:stream-manifest",
    "//zircon/system/utest/core:sync-completion-manifest",
    "//zircon/system/utest/core:sync-condition-manifest",
    "//zircon/system/utest/core:sync-mutex-manifest",
    "//zircon/system/utest/core:threads-manifest",
    "//zircon/system/utest/core:time-manifest",
    "//zircon/system/utest/core:version-manifest",
    "//zircon/system/utest/core:vmar-manifest",
    "//zircon/system/utest/core:vmo-manifest",
    "//zircon/system/core/devmgr/fshost:block-watcher-test-manifest",
    "//zircon/system/ulib/devmgr-integration-test/test:devmgr-integration-manifest",
    "//zircon/system/ulib/driver-integration-test/test:driver-integration-manifest",
    "//zircon/system/utest/driver-test:driver-test-manifest",
    "//zircon/system/utest/fallback-rtc:fallback-rtc-manifest",
    "//zircon/system/core/devmgr/fshost:fshost-metrics-test-manifest",
    "//zircon/system/core/devmgr/fshost:fshost-test-manifest",
    "//zircon/system/ulib/blobfs/test:blobfs-integration-manifest",
    "//zircon/system/ulib/blobfs/test:blobfs-large-integration-fragmentation-manifest",
    "//zircon/system/ulib/blobfs/test:blobfs-large-integration-no-space-manifest",
    "//zircon/system/ulib/blobfs/test:blobfs-large-integration-short-manifest",
    "//zircon/system/ulib/blobfs/test:blobfs-large-integration-use-second-bitmap-manifest",
    "//zircon/system/ulib/blobfs/test:blobfs-integration-paged-manifest",
    "//zircon/system/ulib/blobfs/test:blobfs-large-integration-fragmentation-paged-manifest",
    "//zircon/system/ulib/blobfs/test:blobfs-large-integration-no-space-paged-manifest",
    "//zircon/system/ulib/blobfs/test:blobfs-large-integration-short-paged-manifest",
    "//zircon/system/ulib/blobfs/test:blobfs-large-integration-use-second-bitmap-paged-manifest",
    "//zircon/system/ulib/blobfs/test:blobfs-unit-manifest",
    "//zircon/system/ulib/block-client/test:block-client-unit-manifest",
    "//zircon/system/utest/devfs:devfs-manifest",
    "//zircon/system/utest/fs-bench:fs-bench-manifest",
    "//zircon/system/utest/fs-management:fs-management-manifest",
    "//zircon/system/utest/fs:fs-manifest",
    "//zircon/system/utest/fs-test-utils:fs-test-utils-manifest",
    "//zircon/system/ulib/fs/journal/test:journal-unit-manifest",
    "//zircon/system/utest/memfs:memfs-manifest",
    "//zircon/system/ulib/fs/metrics/test:metrics-cobalt-manifest",
    "//zircon/system/ulib/fs/metrics/test:metrics-composite-latency-event-manifest",
    "//zircon/system/ulib/fs/metrics/test:metrics-inspect-manifest",
    "//zircon/system/ulib/minfs/allocator/test:minfs-allocator-unit-manifest",
    "//zircon/system/ulib/minfs/test:minfs-integration-manifest",
    "//zircon/system/ulib/minfs/test:minfs-power-manifest",
    "//zircon/system/utest/minfs-micro-benchmark:minfs-micro-benchmark-manifest",
    "//zircon/system/ulib/minfs/test:minfs-unit-manifest",
    "//zircon/system/ulib/c/test/sanitizer:sanitizer-utils-manifest",
    "//zircon/system/ulib/storage/buffer/test:storage_buffer-manifest",
    "//zircon/system/ulib/storage/operation/test:storage_operation-manifest",
    "//src/devices/block/drivers/ahci:ahci-unittest-manifest",
    "//src/devices/gpio/drivers/aml-axg-gpio:aml-axg-gpio-test-manifest",
    "//src/devices/cpu/drivers/aml-cpu:aml-cpu-test-manifest",
    "//src/devices/securemem/drivers/aml-securemem:aml-securemem-test-manifest",
    "//src/devices/clock/drivers/amlogic-clk:amlogic-clk-test-manifest",
    "//src/devices/power/drivers/as370-power:as370-power-test-manifest",
    "//zircon/system/dev/lib/as370/test:audio-dsp-test-manifest",
    "//src/ui/backlight/tests:backlight-test-manifest",
    "//zircon/third_party/ulib/backtrace/test:backtrace-test-manifest",
    "//zircon/system/utest/biotime:biotime-test-manifest",
    "//src/devices/block/drivers/core:core-unittest-manifest",
    "//zircon/system/core/bootsvc/test:bootsvc-unit-test-manifest",
    "//zircon/system/core/console:console-test-manifest",
    "//zircon/system/core/svchost:crashsvc-test-manifest",
    "//src/devices/tests/ddk-fidl-test:ddk-fidl-test-manifest",
    "//src/devices/tests/ddk-lifecycle:ddk-lifecycle-manifest",
    "//src/devices/tests/ddk-power:ddk-power-manifest",
    "//src/devices/tests/ddk-runcompatibilityhook:ddk-runcompatibilityhook-test-manifest",
    "//src/devices/tests/ddk-schedule-work:ddk-schedule-work-manifest",
#------------------
    #":test.sys.default-stack-size-default-test",
#------------------
#------------------
    #":test.sys.default-stack-size-phdr-test",
#------------------
    "//zircon/system/dev/lib/device-protocol-pci/test:device-protocol-pci-test-manifest",
    "//zircon/system/dev/lib/device-protocol-pdev/test:device-protocol-pdev-test-manifest",
    "//zircon/system/ulib/disk_inspector/test:disk_inspector_unit-manifest",
    "//zircon/system/utest/dlfcn:dlfcn-manifest",
    "//zircon/system/dev/lib/dma-buffer/test:dma-buffer-test-manifest",
    "//zircon/system/ulib/elf-search/test:elf-search-manifest",
#------------------
    #":test.sys.fdio-test",
#------------------
    "//zircon/system/ulib/fidl-async/test:fidl-async-test-manifest",
    "//zircon/system/utest/fidl:fidl-manifest",
    "//zircon/system/ulib/fit/test:fit-manifest",
    "//zircon/system/utest/fs-recovery:fs-recovery-manifest",
    "//zircon/system/ulib/fs/test_support/test:fs_test_support-manifest",
    "//zircon/system/ulib/ftl/test:ftl_test-manifest",
    "//zircon/system/utest/futex-ownership:futex-ownership-manifest",
    "//src/devices/block/drivers/gpt:gpt-device-test-manifest",
#------------------
    #":test.sys.hermetic-compute-module-test",
#------------------
    "//zircon/system/ulib/hermetic-decompressor/test:hermetic-decompressor-manifest",
    "//zircon/system/ulib/inspect/test:inspect-manifest",
    "//zircon/system/uapp/disk-pave:install-disk-image-test-manifest",
    "//zircon/system/ulib/io-scheduler/test:io-scheduler-test-manifest",
    "//zircon/system/utest/kcounter:kcounter-manifest",
    "//zircon/system/ulib/lazy_init/test:lazy_init-test-manifest",
    "//zircon/third_party/ulib/linenoise/test:linenoise-test-manifest",
    "//zircon/system/utest/log:log-manifest",
    "//src/media/audio/drivers/astro-tdm-output/test:astro-audio-out-test-manifest",
    "//src/devices/block/drivers/mbr:mbr-test-manifest",
    "//zircon/system/ulib/mock-function/test:mock-function-test-manifest",
    "//src/devices/clock/drivers/msm8x53-clk:msm8x53-clk-test-manifest",
    "//src/devices/power/drivers/msm8x53-power:msm8x53-power-test-manifest",
    "//src/devices/usb/drivers/mt-musb-host:mt-hci-request-queue-test-manifest",
    "//src/devices/usb/drivers/mt-musb-host:mt-hci-test-manifest",
    "//src/devices/usb/drivers/mt-musb-host:mt-hci-transaction-test-manifest",
    "//zircon/system/dev/lib/mt8167/test:mt8167-audio-lib-test-manifest",
    "//zircon/system/dev/board/mt8167s_ref:mt8167s_ref-test-manifest",
    "//zircon/system/core/netsvc:netsvc-stress-test-manifest",
    "//zircon/system/core/netsvc:netsvc-test-manifest",
#------------------
    #":test.sys.noop-test",
#------------------
#------------------
    #":test.sys.noop-test.asan",
#------------------
#------------------
    #":test.sys.noop-test.asan-ubsan",
#------------------
#------------------
    #":test.sys.noop-test.profile",
#------------------
#------------------
    #":test.sys.noop-test.sancov",
#------------------
#------------------
    #":test.sys.noop-test.ubsan",
#------------------
#------------------
    #":test.sys.noop-test.ubsan-sancov",
#------------------
#------------------
    #":test.sys.noop-test.ubsan-sancov-full",
#------------------
    "//src/devices/tee/drivers/optee:optee-message-test-manifest",
    "//zircon/system/ulib/paver/test:paver-test-manifest",
    "//zircon/system/ulib/libabr/test:libabr-test-manifest",
    "//src/devices/bus/drivers/pci/test:pci-driver-manifest",
    "//zircon/system/utest/perftest:perftest-manifest",
    "//zircon/system/core/ptysvc:ptysvc-test-manifest",
    "//src/devices/nand/drivers/ram-nand:ram-nand-test-manifest",
    "//zircon/system/ulib/range/test:range-manifest",
    "//zircon/system/utest/runtests-utils:runtests-utils-manifest",
    "//zircon/system/utest/service:service-llcpp-manifest",
    "//src/ui/backlight/drivers/sg-micro:sgm37603a-test-manifest",
    "//src/devices/spi/drivers/spi:spi-test-manifest",
#------------------
    #":test.sys.stdio-test",
#------------------
    "//zircon/system/ulib/storage-metrics/test:storage-metrics-manifest",
    "//zircon/system/dev/lib/as370/test:syn-audio-in-test-manifest",
    "//zircon/system/ulib/sysconfig-client/test:sysconfig-sync-client-test-manifest",
    "//zircon/system/utest/sysmem:sysmem-manifest",
    "//src/devices/sysmem/drivers/sysmem:sysmem-unittest-manifest",
    "//zircon/system/ulib/tftp/test:tftp-test-manifest",
    "//src/devices/thermal/bin/thermal-cli:thermal-cli-manifest",
    "//src/ui/backlight/drivers/ti-lp8556:ti-lp8556-test-manifest",
    "//zircon/system/utest/time:time-manifest",
    "//zircon/system/ulib/trace-engine/test:hash-table-test-manifest",
    "//zircon/system/ulib/trace-provider/test:provider-test-manifest",
    "//zircon/system/utest/trace:trace-static-engine-manifest",
    "//zircon/system/utest/trace:trace-manifest",
    "//src/devices/serial/drivers/uart16550:uart16550-test-manifest",
    "//zircon/system/ulib/unittest/test:unittest-manifest",
    "//src/connectivity/ethernet/drivers/asix-88179:usb-virtual-bus-asix-88179-manifest",
    "//src/connectivity/ethernet/drivers/usb-cdc-ecm:usb-cdc-ecm-unittest-manifest",
    "//zircon/system/dev/lib/usb/test:usb-desc-lib-test-manifest",
    "//zircon/system/dev/lib/usb/test:usb-request-cpp-test-manifest",
    "//zircon/system/dev/lib/usb/test:usb-wrapper-test-manifest",
    "//zircon/system/utest/utc-procargs:utc-procargs-manifest",
    "//zircon/system/utest/vdso-variant:vdso-variant-manifest",
    "//zircon/system/ulib/zbi-bootfs/test:zbi-bootfs-test-manifest",
    "//zircon/system/ulib/libzbi/test:zbi-manifest",
  ]

  if (target_cpu == "arm64") {
    deps += []
  } else if (target_cpu == "x64") {
    deps += [
      "//zircon/system/dev/board/x86:x86-battery-test-manifest",
      "//zircon/system/dev/board/x86:x86-board-test-manifest",
      "//zircon/system/dev/board/x86:x86-cros-ec-test-manifest",
      "//zircon/system/dev/board/x86:x86-lid-test-manifest",
      "//zircon/system/dev/board/x86:x86-pwrsrc-test-manifest",
      "//zircon/system/dev/board/x86:x86-thermal-test-manifest",
      "//zircon/system/utest/x86-board:x86-board-manifest",
      "//zircon/system/utest/x86-umip:x86-umip-manifest",
      "//zircon/system/uapp/acpidump:acpidump-test-manifest",
    ]
  }
}
